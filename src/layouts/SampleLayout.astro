---
import List from "@components/List.astro";
import MainLayout from "@layouts/MainLayout.astro";

const currentPath = Astro.url.pathname;

import items from "../utils/samples.json";

const currentItem = items.find((item) => item.path === currentPath);
---

<MainLayout title={`${currentItem.title}`}>
  <main>
    <div class="video-container">
      <video id="main-video" preload="auto" loop autoplay muted></video>
      <div id="overlay">
        <slot />
      </div>
      <div id="ttml-rendering-div"></div>
    </div>
    <div class="title-container">
      <h1 transition:animate="slide">{currentItem.title}</h1>
      <p transition:animate="slide">{currentItem.description}</p>
    </div>

    <div id="code-output"></div>
  </main>
  <List title="other demos" selected={currentPath} />
</MainLayout>
<style>
  main {
    padding: 1rem;

    @media (min-width: 768px) {
      padding: 1rem 4rem;
    }

    .title-container {
      display: grid;
      gap: 0.5rem;
      padding: 1rem 0px 0.5rem 0px;
      h1 {
        font-size: 1rem;
        font-family: "Inter";
        font-style: normal;
        font-weight: 600;
        color: #ffffff;

        @media (min-width: 768px) {
          font-size: 1.5rem;
        }
      }

      p {
        font-family: "Inter";
        font-style: normal;
        font-weight: 300;
        font-size: 0.75rem;
        line-height: 120%;
        color: rgba(255, 255, 255, 0.8);
        @media (min-width: 768px) {
          font-size: 1rem;
        }
      }
    }

    .video-container {
      position: relative;
      overflow: hidden;
      border-radius: 0.5rem;

      > video {
        width: 100%;
        aspect-ratio: 16 / 9;
        background: black;

        &::-webkit-media-controls-enclosure {
        }
        &::-webkit-media-controls-panel {
        }
      }

      .dash-video-player {
        position: relative; /* This position relative is needed to position the menus */
        margin: 0 auto;
        line-height: 1;
      }

      #overlay {
        position: absolute;
        pointer-events: none;
        height: 100%;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 0;
        overflow: hidden;

        iframe {
          width: 100%;
          height: 100%;
          margin: 0 auto;
          pointer-events: auto;

          body {
            width: 100%;
            height: 100%;
            overflow: hidden;
          }
        }

        video {
          width: 100%;
        }
      }
    }
  }
</style>
<script is:inline src="https://cdn.dashjs.org/v3.1.0/dash.all.min.js"></script>
